spring.datasource.url=jdbc:mysql://localhost:3306/marketcore_v4?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&createDatabaseIfNotExist=true
spring.datasource.username=
spring.datasource.password=

spring.thymeleaf.cache=false
server.error.whitelabel.enabled=false

# upload limits
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=30MB

logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF
logging.level.org.hibernate.orm.jdbc.bind=OFF

# Initialize database with data.sql
spring.sql.init.mode=ALWAYS
spring.jpa.defer-datasource-initialization=true

# Configuration du r?pertoire de stockage des images (chemin absolu)
# Pour le d?veloppement local
app.upload.dir=${user.home}/marketcore/uploads
# Pour le d?ploiement sur serveur (d?commenter et ajuster selon votre serveur)
#app.upload.dir=/var/www/marketcore/uploads
CC_FS_BUCKET=${user.home}/marketcore/uploads

# Configuration du sitemap
app.base-url=https://www.marketcore.com

# Configuration du nom du site
app.site.name=Marketcore
app.site.description=Marketplace  pour le maquillage, les v?tements, l'?lectronique et les t?l?phones
app.site.phone=+33 0619191919
app.site.country=France
app.site.city=Paris
app.site.email=contact@marketcore.com

# Configuration de la devise
app.currency.code=EUR
app.currency.symbol=EUR
app.currency.rate=1.0

# Configuration du rôle par défaut lors de l'inscription
app.user.default-role=ROLE_SELLER

# ==========================================
# CONFIGURATION MAILJET (Mot de passe oublié)
# ==========================================

mailjet.sender-email=contact@marketcore.com
mailjet.sender-name=marketcore

# ==========================================
# OPTIMISATION DES IMAGES (économie RAM)

# ==========================================
# OPTIMISATIONS DE PERFORMANCE
# ==========================================

# Compression Gzip pour r?duire la taille des fichiers CSS/JS/HTML
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml
server.compression.min-response-size=1024

# Cache des ressources statiques (CSS, JS, images)
spring.web.resources.cache.cachecontrol.max-age=31536000
spring.web.resources.cache.cachecontrol.cache-public=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**

# Cache HTTP pour les fichiers statiques
spring.web.resources.cache.period=31536000

# ==========================================
# MONITORING & ACTUATOR (Surveillance m?moire)
# ==========================================
# Activer les endpoints de monitoring
management.endpoints.web.exposure.include=health,metrics,threaddump,heapdump,info,env
management.endpoint.health.show-details=when-authorized
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# S?curiser les endpoints (? ajuster selon vos besoins)
management.endpoints.web.base-path=/actuator
management.server.port=8080

# ==========================================
# GESTION DES SESSIONS (?viter accumulation)
# ==========================================
# Timeout des sessions ? 30 minutes
server.servlet.session.timeout=30m
# Cookies de session s?curis?s
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.max-age=1800

# ==========================================
# CONFIGURATION TOMCAT (Limiter les threads)
# ==========================================
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.connection-timeout=20000
server.tomcat.max-connections=10000
server.tomcat.accept-count=100
server.tomcat.max-http-form-post-size=2097152

# ==========================================
# POOL DE CONNEXIONS HIKARI (?viter fuites)
# ==========================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# ==========================================
# CONFIGURATION JPA/HIBERNATE (Optimisation)
# ==========================================
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Configuration de la langue
spring.web.locale=en
spring.web.locale-resolver=fixed
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false
